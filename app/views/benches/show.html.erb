<script>window.scrollTo(0,0);</script>
<%= content_for(:meta_og) do %>
    <meta property="og:title" content="<%= @benchmark.name %>" />
    <meta property="og:type" content="Benchmark" />
    <meta property="og:published_time" content="<%= @benchmark.created_at.strftime('%Y-%m-%d %H:%M') %>" />
    <meta property="og:author" content="FlightlessMango" />
    <meta property="og:description" content="<%= truncate(strip_tags(@benchmark.description ), length: 50) %>" />
    <meta property="og:image" content="<%= polymorphic_url(@benchmark.stats) if @benchmark.stats.attached? %>" />
    <meta name="twitter:card" content="summary_large_image">
<% end %>
<% if user_signed_in? && current_user.admin? %>
   <%= link_to "Edit", edit_bench_path(@benchmark), class: 'btn btn-success' %>
<% end %>
<% unless @benchmark.description.blank? %>
  <%= render 'modal_description' %>
  <button type="button" class="btn btn-mango" data-toggle="modal" data-target="#descriptionModal">
    Benchmark Description
  </button>
<% end %>
<a class="btn btn-lg btn-primary float-right" href="https://www.youtube.com/watch?v=<%= @benchmark.youtubeid.gsub("-part2", "") %>" role="button" style="background-color: #cc0000;" id="youtubeButton"><strong>Youtube</strong></a>
<br><br>
<h2 style="text-align: center;"><%= @benchmark.name %></h2>
<br>
<% unless @benchmark.inputs.empty? %>
  <% if @benchmark.apis.count > 1 %>
    <%= render 'graphs_apis' %>
  <% else %>
  <% if @benchmark.games.count > 1 %>
  <nav>
    <div class="nav nav-pills nav-justified" id="nav-tab" role="tablist">
      <% @benchmark.games.order(name: :asc).each_with_index do |game, i| %>
      <a class="nav-item nav-link <% if i == 0 %> active <% end %>" onclick="" data-remote="true" id="nav-game-tab-<%= game.id %>-bench-<%= @benchmark.id %>" data-toggle="tab" href="<%= bench_path(@benchmark) %>?game=<%= game.id %>&type=full" role="tab" aria-controls="nav-home" aria-selected="true"><%= game.name %></a>
      <% end %>
      <a class="nav-item nav-link" onclick="" data-remote="true" id="nav-game-tab-total-bench-<%= @benchmark.id %>" data-toggle="tab" href="<%= bench_path(@benchmark) %>?game=total&type=full" role="tab" aria-controls="nav-home" aria-selected="true">Total</a>
    </div>
  </nav>
  <div class="tab-content" id="pills-tabContent" style="padding: 25px 0px 0px;">
      <% benches_game = BenchesGame.where(game_id: @benchmark.games.order(name: :asc).first.id, bench_id: @benchmark.id).last %>
  </div>
    <!-- <div id="loadingSpinner" class="loader" style="margin-top: 50px; margin-bottom: 200px;"></div> -->
    <% else %>
      <% benches_game = BenchesGame.where(game_id: @benchmark.games.first.id, bench_id: @benchmark.id).last %>
    <% end %>
    <%= render partial: 'graphs', locals: {benches_game: benches_game} %>
  <% end %>
<% end %>